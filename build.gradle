/*
 * This file was generated by the Gradle 'init' task.
 */


plugins {
	id 'java-gradle-plugin'
	id 'maven-publish'
	id("io.freefair.lombok") version "8.0.1"
}

group = 'com.snowflake'
version = '0.1.0-SNAPSHOT'
description = 'Snowflake Gradle Plugin'
java.sourceCompatibility = JavaVersion.VERSION_11

sourceSets {
	main {
		java {
			exclude 'com/snowflake/plugins/udf/maven/**'
		}
	}
	test {
		java {
			exclude "com/snowflake/plugins/udf/maven/**"
		}
	}
}

test {
	filter {
		//exclude all tests from a package.
		excludeTestsMatching "com.snowflake.snowflake_maven_plugin.**"
	}
}

repositories {
	mavenCentral()
}

gradlePlugin {
	plugins {
		snowflakeGradlePlugin {
			id = 'com.snowflake.snowflake-gradle-plugin'
			implementationClass = 'com.snowflake.snowflake_gradle_plugin.SnowflakePlugin'
		}
	}
}

dependencies {
	api 'net.snowflake:snowflake-jdbc:3.13.27'
	api 'org.twdata.maven:mojo-executor:2.4.0'
	api 'commons-io:commons-io:2.11.0'
	testImplementation 'org.apache.maven:maven-compat:3.3.9'
	testImplementation 'junit:junit:4.12'
	testImplementation 'org.apache.maven.plugin-testing:maven-plugin-testing-harness:3.3.0'
	testImplementation 'org.mockito:mockito-core:5.1.1'
	testImplementation 'org.hamcrest:hamcrest:2.2'
	compileOnly 'org.apache.maven:maven-plugin-api:3.3.9'
	compileOnly 'org.apache.maven:maven-core:3.3.9'
	compileOnly 'org.apache.maven:maven-artifact:3.3.9'
	compileOnly 'org.apache.maven.plugin-tools:maven-plugin-annotations:3.6.0'
}

publishing {
	publications {
		maven(MavenPublication) {
			groupId = getGroup()
			artifactId = getName()
			version = getVersion()
			from(components.java)
		}
	}
	repositories {
		mavenLocal()
	}
}

tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

tasks.withType(Javadoc) {
	options.encoding = 'UTF-8'
}